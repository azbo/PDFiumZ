# PDFiumZ 功能需求优先级清单

> 制定时间: 2025-12-24
> 当前版本: v145.0.7592.2
> 目标版本: v146.0.0

## 📊 功能完成度总览

| 功能模块 | 完成度 | 优先级 | 状态 |
|---------|--------|--------|------|
| 文档操作 | 100% | - | ✅ 已完成 |
| 页面管理 | 100% | - | ✅ 已完成 |
| 内容渲染 | 100% | - | ✅ 已完成 |
| 注解系统 | 100% | - | ✅ 已完成 |
| 表单字段 | 90% | P2 | 🔶 部分完成 |
| **书签** | **30%** | **P0** | ❌ **只读，需完善** |
| **元数据** | **50%** | **P0** | ❌ **只读，需完善** |
| **链接** | **30%** | **P0** | ❌ **只读，需完善** |
| 页面标签 | 0% | P1 | ❌ 未实现 |
| 附件 | 0% | P1 | ❌ 未实现 |
| 页面缩略图 | 0% | P1 | ❌ 未实现 |

---

## 🎯 P0 - 最高优先级（核心缺失功能）

### 1️⃣ 书签功能完善 ⭐⭐⭐⭐⭐

**为什么重要**：
- 📚 企业文档管理的**标配功能**
- 📖 电子书、报告、手册必需
- 🔍 大文档导航的**核心体验**

**现状**：
- ✅ 可以读取书签
- ❌ **无法创建书签** ← 最大痛点
- ❌ **无法修改书签** ← 最大痛点
- ❌ **无法删除书签** ← 最大痛点

**缺失场景**：
```csharp
// ❌ 当前无法实现
var doc = PdfDocument.Open("report.pdf");
var bookmark = doc.Bookmarks.Create("第一章", pageIndex: 0);
bookmark.AddChild("1.1 概述", pageIndex: 1);
bookmark.AddChild("1.2 详细说明", pageIndex: 5);
doc.Save("report-with-bookmarks.pdf");
```

**工作量**：3-4 天
**用户价值**：★★★★★
**技术难度**：中等

---

### 2️⃣ 元数据读写 ⭐⭐⭐⭐⭐

**为什么重要**：
- 🏢 文档管理系统的**基础设施**
- 🔎 搜索和分类的**关键信息**
- ✅ 合规性要求（作者、版本等）

**现状**：
- ✅ 可以读取标准元数据（标题、作者等）
- ❌ **无法设置元数据** ← 最大痛点

**缺失场景**：
```csharp
// ❌ 当前无法实现
var doc = PdfDocument.CreateNew();
doc.Metadata.SetTitle("年度报告 2024");
doc.Metadata.SetAuthor("张三");
doc.Metadata.SetSubject("财务总结");
doc.Metadata.SetKeywords("财务, 2024, 年报");
doc.Save("report-2024.pdf");
```

**工作量**：2-3 天
**用户价值**：★★★★★
**技术难度**：低-中等

---

### 3️⃣ 链接创建功能 ⭐⭐⭐⭐

**为什么重要**：
- 🔗 交互式文档的**必备功能**
- 📑 目录跳转、参考文献
- 🌐 外部资源引用

**现状**：
- ✅ 可以读取链接
- ❌ **无法创建内部跳转链接** ← 最大痛点
- ❌ **无法创建外部 URL 链接** ← 最大痛点

**缺失场景**：
```csharp
// ❌ 当前无法实现
var doc = PdfDocument.Open("document.pdf");
var page = doc.GetPage(0);

// 创建目录跳转链接
var tocLink = PdfLink.CreateInternal(
    page,
    bounds: new PdfRectangle(50, 700, 100, 20),
    targetPage: 10
);

// 创建外部链接
var urlLink = PdfLink.CreateExternal(
    page,
    bounds: new PdfRectangle(50, 650, 150, 20),
    url: "https://pdfiumz.com"
);

doc.Save("interactive.pdf");
```

**工作量**：3-4 天
**用户价值**：★★★★☆
**技术难度**：中等

---

## 🔧 P1 - 高优先级（增强功能）

### 4️⃣ 页面缩略图 ⭐⭐⭐⭐

**为什么重要**：
- 👁️ PDF 查看器的**标准功能**
- 🖼️ 页面预览和导航
- ⚡ 提升用户体验

**需求**：
```csharp
// 🎯 期望 API
var doc = PdfDocument.Open("document.pdf");

// 生成单页缩略图
var thumbnail = doc.GetPage(0).GenerateThumbnail(width: 200);
thumbnail.SaveAsSkiaPng("thumb-0.png");

// 批量生成所有缩略图
var thumbnails = doc.GenerateAllThumbnails(maxWidth: 200);
```

**工作量**：2-3 天
**用户价值**：★★★★☆
**技术难度**：低-中等

---

### 5️⃣ 附件功能 ⭐⭐⭐

**为什么重要**：
- 📎 档案管理系统需求
- 📦 打包相关文件
- 🔐 保持文件完整性

**需求**：
```csharp
// 🎯 期望 API
var doc = PdfDocument.Open("document.pdf");

// 读取附件
var attachments = doc.GetAttachments();
foreach (var att in attachments)
{
    File.WriteAllBytes(att.FileName, att.GetData());
}

// 添加附件
doc.AddAttachment("source-code.zip", File.ReadAllBytes("code.zip"));
doc.Save("with-attachments.pdf");
```

**工作量**：3-4 天
**用户价值**：★★★☆☆
**技术难度**：中等

---

### 6️⃣ 页面标签 (Page Labels) ⭐⭐⭐

**为什么重要**：
- 📖 复杂文档的页码管理
- 🔢 多种页码格式（罗马数字、字母）
- 📚 书籍、论文排版需求

**需求**：
```csharp
// 🎯 期望 API
var doc = PdfDocument.CreateNew();

// 前言用小写罗马数字 (i, ii, iii)
doc.SetPageLabels(0, 5, PdfPageLabelStyle.LowercaseRoman);

// 正文用阿拉伯数字 (1, 2, 3)
doc.SetPageLabels(5, doc.PageCount, PdfPageLabelStyle.Decimal);

doc.Save("book.pdf");
```

**工作量**：2-3 天
**用户价值**：★★★☆☆
**技术难度**：中等

---

## 🚀 P2 - 中优先级（专业功能）

### 7️⃣ 数字签名 ⭐⭐

**限制**：PDFium 对数字签名支持有限，可能需要第三方库

**需求**：
- 读取签名信息
- 验证签名有效性
- (可选) 添加数字签名

**工作量**：7-10 天
**用户价值**：★★★☆☆
**技术难度**：高

---

### 8️⃣ PDF/A 合规性 ⭐

**需求**：
- 检测 PDF/A 合规性
- 转换为 PDF/A 格式
- 合规性报告

**工作量**：5-7 天
**用户价值**：★★☆☆☆
**技术难度**：高

---

### 9️⃣ 文档比较 ⭐

**需求**：
- 文本差异比较
- 视觉差异比较
- 差异报告生成

**工作量**：5-7 天
**用户价值**：★★★☆☆
**技术难度**：高

---

## 📅 建议开发顺序

### 第一阶段 (v146.0.0-beta.1) - 4 周
1. ✅ **书签功能完善** (3-4 天)
2. ✅ **元数据读写** (2-3 天)
3. ✅ **链接创建** (3-4 天)

**预期成果**：解决 3 个最大痛点，覆盖 80% 用户需求

---

### 第二阶段 (v146.0.0-beta.2) - 2 周
4. ✅ **页面缩略图** (2-3 天)
5. ✅ **附件功能** (3-4 天)
6. ✅ **页面标签** (2-3 天)

**预期成果**：增强易用性，支持更多场景

---

### 第三阶段 (v146.1.0+) - 长期规划
7. 数字签名（根据用户需求评估）
8. PDF/A 合规性（根据用户需求评估）
9. 文档比较（根据用户需求评估）

---

## 🎯 投入产出比分析

| 功能 | 工作量 | 用户价值 | ROI (价值/工作量) | 排序 |
|-----|--------|---------|-----------------|------|
| 元数据读写 | 2-3 天 | ★★★★★ | 1.83 | 🥇 1 |
| 页面缩略图 | 2-3 天 | ★★★★☆ | 1.5 | 🥈 2 |
| 书签功能 | 3-4 天 | ★★★★★ | 1.43 | 🥉 3 |
| 链接创建 | 3-4 天 | ★★★★☆ | 1.14 | 4 |
| 页面标签 | 2-3 天 | ★★★☆☆ | 1.2 | 5 |
| 附件功能 | 3-4 天 | ★★★☆☆ | 0.86 | 6 |
| 文档比较 | 5-7 天 | ★★★☆☆ | 0.5 | 7 |
| PDF/A | 5-7 天 | ★★☆☆☆ | 0.33 | 8 |
| 数字签名 | 7-10 天 | ★★★☆☆ | 0.35 | 9 |

**推荐优先级**（基于 ROI）：
1. 元数据读写 ← **Quick Win!**
2. 页面缩略图 ← **Quick Win!**
3. 书签功能 ← **高价值**
4. 链接创建 ← **高价值**
5. 页面标签
6. 附件功能

---

## 💡 关键发现

### ✅ 优势
- 核心功能（渲染、注解、表单）已完成 100%
- 代码质量高，测试覆盖良好
- API 设计一致，易于扩展

### ⚠️ 缺失
- **书签/元数据/链接只读** ← 最大痛点
- 缺少导航和交互功能
- 专业功能（签名、PDF/A）缺失

### 🎯 建议
1. **先解决 P0 功能**：快速填补最大缺口
2. **从 Quick Win 开始**：元数据读写（2-3 天，高价值）
3. **保持 API 一致性**：参考现有模式设计新 API
4. **增量发布**：beta 版本快速迭代，收集反馈

---

## 📊 用户场景覆盖度

### 当前覆盖 (v145.x)
- ✅ 基础文档操作（创建、编辑、渲染）
- ✅ 内容提取（文本、图像）
- ✅ 注解和表单
- ❌ **文档导航和交互** ← 主要缺失
- ❌ **元数据管理** ← 主要缺失

### v146.0.0 目标覆盖
- ✅ 基础功能 (100%)
- ✅ **文档导航** (100%) ← 新增
- ✅ **元数据管理** (100%) ← 新增
- ✅ **交互功能** (80%) ← 新增
- 🔶 专业功能 (30%) ← 长期目标

**预期用户满意度提升**：从 70% → 90%

---

**最后更新**: 2025-12-24
**下次审查**: Sprint 结束后
